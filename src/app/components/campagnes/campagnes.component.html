<div class="page p-5">
  <!-- Section header: Tabs + button on the left / filters on the right -->
  <div class="section-header d-flex justify-content-between align-items-center mb-4">
    <!-- Left -->
    <div class="d-flex align-items-center">
      <ul class="nav custom-tabs align-items-center mb-0">
        <li class="nav-item"><a class="nav-link active">Campagnes</a></li>
        <li class="nav-separator" aria-hidden="true"></li>
        <li class="nav-item"><a class="nav-link">Mots-clés</a></li>
      </ul>

      <button class="btn btn-compagne ms-3">Nouvelle campagne</button>
    </div>

    <!-- Right -->
    <div class="d-flex align-items-center gap-2">
      <select class="form-select form-select-sm custom-select-grey"  style="width:180px;">
        <option
          *ngFor="let opt of pageSortOption"
          (click)="onPageOptionChange(opt)"
        >
        >{{ opt }}</option>
      </select>

      <div class="input-group input-group-sm" style="width:200px;">
        <input
          [(ngModel)]="q"
          type="text"
          class="form-control custom-input-grey"
          placeholder="Rechercher..."
          aria-label="Rechercher"
        />
        <span class="input-group-text bg-white">
          <i class="bi bi-search"></i>
        </span>
      </div>
    </div>
  </div>

  <!-- Table -->
  <div class="card ">
    <div class="card-body p-4">
      <table class="table align-middle mb-0">
        <thead class="thead-light small p-3 borde text-muted">
          <tr>
            <th class="ps-0">Nom</th>
            <th></th>
            <th class="text-center align-middle">Partages</th>
            <th class="text-center align-middle">Clics</th>
            <th class="text-center align-middle">Contacts</th>
            <th></th>
          </tr>
        </thead>

        <tbody >
          <tr *ngFor="let c of paged">
            <!-- Name + tags -->
            <td class="ps-0 py-3">
              <div class="campaign-title">{{ c.name }}</div>
              <div class="d-flex flex-wrap gap-2 mt-1">
                <span *ngFor="let t of c.tags" class="badge badge-red">{{ t }}</span>
              </div>
            </td>

            <!-- Avatar -->
            <td>
              @if (c.avatar) {
                <img
                  [src]="'assets/avatars/' + c.avatar"
                  class="rounded-circle"
                  width="50"
                  height="50"
                  alt=" "
                />
              }
            </td>

            <!-- Shares -->
            <td class="text-center align-middle">
              <div class="fw-semibold">{{ c.shares }}</div>
              @if (c.shares_pending) {
                <div class="text-muted small">({{ c.shares_pending }} en attente)</div>
              }
            </td>

            <!-- Clicks / Contacts -->
            <td class="text-center align-middle">{{ c.clicks   | thousandSep }}</td>
            <td class="text-center align-middle">{{ c.contacts | thousandSep }}</td>

            <!-- Actions -->
            <td class="pe-0 text-end">
              <div class="d-flex justify-content-end gap-2">
                <button class="btn btn-teal btn-sm" aria-label="Partager"><i class="bi bi-share-fill"></i></button>
                <button class="btn btn-teal btn-sm" aria-label="Éditer"><i class="bi bi-pencil-fill"></i></button>
                <button class="btn btn-teal btn-sm" aria-label="Paramètres"><i class="bi bi-gear-fill"></i></button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>

      <!-- Footer: page size selector + pagination -->
      <div class="d-flex align-items-center justify-content-between pt-3 small table-footer">
        <!-- Results per page -->
        <div class="d-flex align-items-center gap-2">
          <div class="dropdown">
            <button
              class="btn btn-sm page-size-btn dropdown-toggle"
              type="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              {{ pageSize }} Résultats par page
            </button>
            <ul class="dropdown-menu">
              <li *ngFor="let opt of pageSizeOptions">
                <button
                  class="dropdown-item"
                  [class.active]="opt === pageSize"
                  (click)="onPageSizeChange(opt)"
                >
                  {{ opt }}
                </button>
              </li>
            </ul>
          </div>
        </div>

        <!-- Mini pagination -->
        <div class="btn-group pagination-ghost">
          <!-- Left arrow visible only if page > 1 -->
          <button
            *ngIf="currentPage > 1"
            class="btn btn-ghost btn-sm"
            (click)="prevPage()"
            aria-label="Page précédente"
          >
            <i class="bi bi-chevron-left"></i>
          </button>

          <span class="page-indicator">{{ currentPage }} / {{ totalPages }}</span>

          <!-- Right arrow visible only if not on the last page -->
          <button
            *ngIf="currentPage < totalPages"
            class="btn btn-ghost btn-sm"
            (click)="nextPage()"
            aria-label="Page suivante"
          >
            <i class="bi bi-chevron-right"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
