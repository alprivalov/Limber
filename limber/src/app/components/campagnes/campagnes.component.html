<div class="page p-4">
  <!-- Header de section : Onglets + bouton à gauche / filtres à droite -->
  <div class="section-header d-flex justify-content-between align-items-center mb-3">
    <!-- Gauche -->
    <div class="d-flex align-items-center">
      <ul class="nav custom-tabs align-items-center mb-0">
        <li class="nav-item"><a class="nav-link active">Campagnes</a></li>
        <li class="nav-separator" aria-hidden="true"></li>
        <li class="nav-item"><a class="nav-link">Mots-clés</a></li>
      </ul>
      <button class="btn btn-compagne  ms-3">Nouvelle campagne</button>

    </div>

    <!-- Droite -->
    <div class="d-flex align-items-center gap-2">
      <select class="form-select form-select-sm" style="width:180px;">
        <option>Date de création. desc.</option>
      </select>
      <div class="input-group input-group-sm" style="width:200px;">
        <input [(ngModel)]="q"
              type="text"
              class="form-control"
              placeholder="Rechercher...">
        <span class="input-group-text bg-white">
          <i class="bi bi-search"></i>
        </span>
      </div>
    </div>
  </div>

  <!-- Tableau -->
  <div class="card shadow-sm">
    <div class="card-body p-4">
      <table class="table align-middle mb-0">
        <thead class="thead-light small text-muted">
          <tr>
            <th class="ps-4">Nom</th>
            <th></th>
            <th>Partages</th>
            <th>Clics</th>
            <th>Contacts</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let c of paged"> 
            <!-- Nom + tags -->
          <td class="ps-4 py-3">
            <div class="fw-semibold campaign-title">{{ c.name }}</div>
            <div class="d-flex flex-wrap gap-2 mt-1">
              <span *ngFor="let t of c.tags" class="badge badge-red">{{ t }}</span>
            </div>
          </td>


            <!-- Avatar -->
            <td>
              @if (c.avatar) {
                <img [src]="'assets/avatars/' + c.avatar"
                    class="rounded-circle"
                    width="50" height="50"
                    alt=" ">
              }
            </td>

            <!-- Partages -->
            <td>
              <div class="fw-semibold">{{ c.shares }}</div>
              <div class="text-muted small" *ngIf="c.shares_pending">
                ({{ c.shares_pending }} en attente)
              </div>
            </td>

            <!-- Clics / Contacts -->
            <td>{{ c.clicks   | thousandSep }}</td>
            <td>{{ c.contacts | thousandSep }}</td>

            <!-- Actions -->
            <td class="pe-4 text-end">
              <div class="d-flex justify-content-end gap-2">
                <button class="btn btn-teal btn-sm"><i class="bi bi-share-fill"></i></button>
                <button class="btn btn-teal btn-sm"><i class="bi bi-pencil-fill"></i></button>
                <button class="btn btn-teal btn-sm"><i class="bi bi-gear-fill"></i></button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
      <div class="d-flex align-items-center justify-content-between p-3 border-top small">
        <div class="d-flex align-items-center gap-2">
          <div class="dropdown">
            <button
              class="btn btn-sm page-size-btn dropdown-toggle"
              type="button"
              data-bs-toggle="dropdown"
              aria-expanded="false">
              {{ pageSize }} Résultats par page
            </button>
            <ul class="dropdown-menu">
              <li *ngFor="let opt of pageSizeOptions">
                <button
                  class="dropdown-item"
                  [class.active]="opt === pageSize"
                  (click)="onPageSizeChange(opt)">
                  {{ opt }}
                </button>
              </li>
            </ul>
          </div>
        </div>

        <!-- Pagination -->
        <div class="btn-group pagination-mini">
          <button class="btn btn-light btn-sm"
                  [disabled]="currentPage === 1"
                  (click)="prevPage()">
            <i class="bi bi-chevron-left"></i>
          </button>
          <button class="btn btn-light btn-sm disabled">
            {{ currentPage }}/{{ totalPages }}
          </button>
          <button class="btn btn-light btn-sm"
                  [disabled]="currentPage === totalPages"
                  (click)="nextPage()">
            <i class="bi bi-chevron-right"></i>
          </button>
        </div>
      </div>

    </div>
  </div>
</div>
